# shiki_bot
## Инструкция по пользованию ботом
Запускается командой /start. На выбор предлагается 3 функции в виде кнопок:
### Найти
Ищет уже созданную модель по введенному нику. Если модель не найдена, то предложить нажать на "Загрузить" и снова ввести ник.

### Загрузить
Загружает список аниме по нику и создает модель.
### Исходный код
Дает ссылку на github.
## Требования ко списку
Список должен быть открытым, как и ваши оценки. Наличие тайтлов с рейтингом Rx не важно, они автоматически удаляются. Желательно чтобы оценки были проставлены на большинстве тайтлов, потому что тайтлы без оценки не учитываются при подсчете параметров модели. В списке НЕ должно быть онгоингов либо анонсов. Получить оценку-предсказание можно на все, кроме:\
. Онгоинг\
. Анонс\
. Рейтинг Rx\
Предсказание возможно только для аниме, для манги такой возможности нет.
## Описание функций
### shiki_parser.py
Собирает информацию из вашего списка. Возможно два варианта исполнения функции - асинхронный и синхронный. В боте синхронный метод добавлен не будет, поскольку
это не имеет смысла в виду того, что асинхронный вариант быстрее. \
Период отправки запроса составляет 1.35 sec, потому что при более маленькой задержке сервер пересает отвечать на запросы в какой-то момент. 
С этим и связано довольно долгое выполнение программы, особенно для больших списков. Вообще говоря, в инструкции к API сайта указано ограниченние в 
90 запросов в секунду, что должно было бы позволять опрашивать сервер с периодом 0.67 sec, но практическим путем было выявлено, что значение 1.5 стабильное. 
На данный момент используется 1.35 и вроде как показывает себя тоже стабильно.
## predict_anime_score.py
Создает модель или предсказывает оценку, если модель уже была создана. Используется градиентый бустинг с помощью библиотеки CatBoost. Обучаемые параметры - глубина деревьев и регуляризатор в листе. 
Хотелось бы добавить побольше, но время обучение и так составляет примерно 10-20 минут. Также обрабатывает данные - делает их чисто числовыми. Делает запрос для получения названия аниме по ссылке. Выдает предсказанную оценку.
## bot.py
Просто бот для телеграма.
## Некоторая мотивация автора
Научиться некторым вещам.
Более подробно будет написано позже.
будет написано позже. 
